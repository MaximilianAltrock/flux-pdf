@import 'tailwindcss';

@theme {
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-background: var(--background);
  --color-surface: var(--surface);
  --color-interactive: var(--interactive);
  --color-border: var(--border);
  --color-text: var(--text);
  --color-text-muted: var(--text-muted);
  --color-danger: var(--danger);
  --color-selection: var(--selection);

  --radius-sm: var(--radius-button);
  --radius-md: var(--radius-button);
  --radius-lg: var(--radius-button);
  --radius-none: 0px;

  --font-sans: 'Inter', system-ui, sans-serif;
  --font-mono: 'JetBrains Mono', monospace;

  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }
  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
}

/*
  Technical Dark Mode Theme (Default)
*/
:root {
  /* Surface Hierarchy */
  --background: #1e1e1e; /* Level 0: App Shell */
  --surface: #252526; /* Level 1: Panels */
  --surface-hover: #2d2d30;

  /* Borders & Separators */
  --border: #3e3e42; /* 1px solid separator */
  --border-focus: #3b82f6; /* Focus state blue */

  /* Interactive Elements (Level 2) */
  --interactive: #333333;
  --interactive-hover: #3e3e42;

  /* Content (Level 3) */
  --content: #ffffff; /* PDF Pages only */

  /* Text Colors */
  --text: #cccccc; /* Muted white for general UI */
  --text-primary: #ffffff; /* High contrast headers/input */
  --text-muted: #858585; /* Secondary/Icons */

  /* Accents */
  --primary: #6366f1; /* Electric Indigo */
  --primary-hover: #4f46e5;
  --primary-foreground: #ffffff;

  --selection: #3b82f6; /* Hollow Blue Border */
  --selection-bg: rgba(59, 130, 246, 0.1);

  --danger: #f43f5e; /* Muted Coral */

  /* Spacing System */
  --radius-panel: 0px;
  --radius-button: 4px;
  --radius-page: 0px;

  /* Paper Shadow */
  --paper-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
  --paper-border: none;
}

/*
  Clinical Light Mode Theme
  Applied via :root.light-theme (on html element)
*/
:root.light-theme {
  /* Surface Hierarchy */
  --background: #f3f4f6 !important; /* Cool Grey canvas */
  --surface: #ffffff !important; /* Pure white panels */
  --surface-hover: #f9fafb !important;

  /* Borders & Separators */
  --border: #e5e7eb !important; /* Subtle grey */
  --border-focus: #3b82f6 !important;

  /* Interactive Elements */
  --interactive: #f3f4f6 !important;
  --interactive-hover: #e5e7eb !important;

  /* Content */
  --content: #ffffff !important;

  /* Text Colors */
  --text: #374151 !important; /* Dark grey for general UI */
  --text-primary: #111827 !important; /* Near black for headings */
  --text-muted: #6b7280 !important; /* Slate grey for secondary */

  /* Accents - slightly darker for WCAG AA contrast */
  --primary: #4f46e5 !important;
  --primary-hover: #4338ca !important;
  --primary-foreground: #ffffff !important;

  --selection: #3b82f6 !important;
  --selection-bg: rgba(59, 130, 246, 0.15) !important;

  --danger: #dc2626 !important;

  /* Paper visibility in light mode */
  --paper-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
  --paper-border: 1px solid #e5e7eb !important;
}

@layer base {
  /* === MOBILE NATIVE RESET === */
  html {
    /* iOS 15+ fix: Forces height to match the visible screen exactly, ignoring address bar */
    height: -webkit-fill-available;
    /* Disable pull-to-refresh on the root */
    overscroll-behavior-y: none;
  }

  body {
    @apply bg-background text-text transition-colors duration-300 antialiased font-sans;
    min-height: 100vh;
    min-height: -webkit-fill-available;
    height: 100dvh;

    /* Prevent the whole app from bouncing */
    overflow: hidden;
    position: fixed;
    width: 100%;

    /* Disable Native Gestures & Selection */
    touch-action: manipulation; /* Kill double-tap zoom */
    -webkit-touch-callout: none; /* Kill "Save Image" popup */
    -webkit-user-select: none; /* Kill text selection */
    user-select: none;
    -webkit-tap-highlight-color: transparent; /* Kill blue tap box */
  }

  /* Re-enable text selection ONLY for inputs */
  input,
  textarea {
    -webkit-user-select: text;
    user-select: text;
  }

  /* Prevent dragging images (ghost image effect) */
  img {
    -webkit-user-drag: none;
    pointer-events: none;
  }

  /* For data/numbers */
  .font-data {
    @apply font-mono;
  }
}
